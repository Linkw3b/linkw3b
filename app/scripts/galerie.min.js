function changePicture(a,b,c,d,e){var f=getNextElem(a,d),g=getPictureInfo(f,c);return jQuery("#"+e).fadeOut(250,function(){jQuery(this).html(g).fadeIn(250)}),f}function getNextElem(a,b){return"right"==b?nextElem=a.is(":last-child")?a.parent().children(":first-child"):a.next():"left"==b&&(nextElem=a.is(":first-child")?a.parent().children(":last-child"):a.prev()),"none"==nextElem.css("display")&&(nextElem=getNextElem(nextElem,b)),nextElem}function getPictureInfo(a,b){var c=a.attr("data-title"),d=a.attr("data-src"),e="<h2>"+c+"</h2>";return a.children(":first").hasClass(b)&&(e+="<p>"+a.children(":first").html()+"</p>"),e+='<div class="imgContainer"><img alt="" src="'+d+'"></div>'}jQuery(function(){var a="overlay",b="popin-galery",c="js-portfolio-descr",d="js-portfolio-block",e=!1,f="popin-container",g="left-galery",h="right-galery",i=jQuery(".js-magnify-icon, #close-galery ,"+g+", "+h),j="";jQuery.each(jQuery("."+d),function(a,b){var c=new Image;c.src=jQuery(b).attr("data-src")}),jQuery("body").on("click",i,function(g){jQuery(g.target).is("#close-galery")||jQuery(g.target).is("#overlay")?jQuery("#"+a+", #"+b).fadeOut(250,function(){jQuery("#"+a+", #"+b).remove(),jQuery("body").removeAttr("style"),e=!1,j=""}):jQuery(g.target).is(".js-magnify-icon")?(galeryHtml='<div id="'+a+'" class="overlay"></div><div id="'+b+'" class="galery-popin"><span class="close-icon" id="close-galery"></span><div class="'+f+'" id="'+f+'">',galeryHtml+=getPictureInfo(jQuery(g.target).parents(".js-portfolio-block"),c),galeryHtml+='</div><div class="left-arrow-icon" data-direction="left" id="left-galery"></div><div class="right-arrow-icon" data-direction="right" id="right-galery"></div></div>',jQuery("body").css({overflow:"hidden"}),jQuery("body").append(galeryHtml),jQuery("#"+a+", #"+b).fadeIn(250),e=!0,j=jQuery(g.target).parents(".js-portfolio-block")):jQuery(g.target).attr("data-direction")&&(j=changePicture(j,d,c,jQuery(g.target).attr("data-direction"),f))}),jQuery(document).keydown(function(a){e&&37==a.keyCode?j=changePicture(j,d,c,"left",f):e&&39==a.keyCode?j=changePicture(j,d,c,"right",f):e&&27==a.keyCode&&(j="",jQuery("#close-galery").trigger("click"))})});